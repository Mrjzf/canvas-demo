!function(){if(void 0===window.QIHOO_MONITOR){var t=["360.cn","so.com","leidian.com"],e=function(n){var r,i,o,a,c,u,s,g,h,d,f,l,m,p,v,b,w;return!function(){r=!0;try{var t=location.protocol.toLowerCase();"http:"!=t&&"https:"!=t||(r=!1)}catch(e){}}(),i=document,o=navigator,a=n.screen,c=r?"":document.domain.toLowerCase(),u=o.userAgent.toLowerCase(),s={trim:function(t){return t.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,"")}},g={on:function(t,e,n){t.addEventListener?t&&t.addEventListener(e,n,!1):t&&t.attachEvent("on"+e,n)},parentNode:function(t,e,n){for(n=n||5,e=e.toUpperCase();t&&n-->0;){if(t.tagName===e)return t;t=t.parentNode}return null}},h={fix:function(t){if(!("target"in t)){var e=t.srcElement||t.target;e&&3==e.nodeType&&(e=e.parentNode),t.target=e}return t}},d=function(){function t(t){return null!=t&&null!=t.constructor?Object.prototype.toString.call(t).slice(8,-1):""}return{isArray:function(e){return"Array"==t(e)},isObject:function(t){return null!==t&&"object"==typeof t},mix:function(t,e,n){for(var r in e)!n&&(t[r]||r in t)||(t[r]=e[r]);return t},encodeURIJson:function(t){var e,n=[];for(e in t)null!=t[e]&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")}}}(),f={get:function(t){try{var e,n=RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=i.cookie.match(n))?unescape(e[2]):""}catch(r){return""}},set:function(t,e,n){n=n||{};var r=n.expires;"number"==typeof r&&(r=new Date,r.setTime(r.getTime()+n.expires));try{i.cookie=t+"="+escape(e)+(r?";expires="+r.toGMTString():"")+(n.path?";path="+n.path:"")+(n.domain?"; domain="+n.domain:"")}catch(o){}}},l={get:function(t){try{return JSON.parse(n.localStorage.getItem(t))}catch(e){return[]}},set:function(t,e){try{n.localStorage.setItem(t,JSON.stringify(e))}catch(r){}},remove:function(t){try{n.localStorage.removeItem(t)}catch(e){}}},m={getColorDepth:function(){return a.colorDepth+"-bit"},getLanguage:function(){return(o.language||o.browserLanguage).toLowerCase()},getScreenSize:function(){return a.width+"x"+a.height},getProject:function(){return""},getReferrer:function(){var t=i.referrer||"";return t.indexOf("pass")>-1||t.indexOf("pwd")>-1?"403":t},getBrowser:function(){var t,e,r,i={"360se-ua":"360se",TT:"tencenttraveler",Maxthon:"maxthon",GreenBrowser:"greenbrowser",Sogou:"se 1.x / se 2.x",TheWorld:"theworld"};for(t in i)if(u.indexOf(i[t])>-1)return t;e=!1;try{+external.twGetVersion(external.twGetSecurityID(n)).replace(/\./g,"")>1013&&(e=!0)}catch(o){}return e?"360se-noua":(r=u.match(/(msie|chrome|safari|firefox|opera|trident)/),r=r?r[0]:"","msie"==r?r=u.match(/msie[^;]+/)+"":"trident"==r&&u.replace(/trident\/[0-9].*rv[ :]([0-9.]+)/gi,function(t,e){r="msie "+e}),r)},getLocation:function(){var t="";try{t=location.href}catch(e){t=i.createElement("a"),t.href="",t=t.href}return t=/\.(s?htm|php)/.test(t)?t:t.replace(/\/$/,"")+"/"},hash:function(t){var e,n=0,r=0,i=t.length-1;for(i;i>=0;i--)e=parseInt(t.charCodeAt(i),10),n=(n<<6&268435455)+e+(e<<14),0!=(r=266338304&n)&&(n^=r>>21);return n},guid:function(){for(var t=""+o.appName+o.version+(o.language||o.browserLanguage)+o.platform+o.userAgent+a.width+"x"+a.height+a.colorDepth+i.referrer,e=t.length,r=n.history.length;r;)t+=r--^e++;return 2147483647*(Math.round(2147483647*Math.random())^m.hash(t))},getSid:function(){var t,e=f.get("__DC_sid");return!e&&(e=f.get("__sid"))&&4!==e.split(".").length&&(e=null),e||(e=[m.hash(r?"":i.domain),m.guid(),+new Date+Math.random()].join(".")),t={expires:60*(m._activeTime||30)*1e3,path:"/"},f.set("__DC_sid",e,t),e},getMid:function(){try{return external.GetMID(external.GetSID(n))}catch(t){return""}},getGid:function(){var e,n,o,a,u=f.get("__DC_gid");if(!u&&(u=f.get("__gid"))&&5!==u.split(".").length&&(u=null),u?(u=u.split("."),u[3]=(new Date).getTime(),u[4]=(parseInt(u[4])||1)+1,u=u.join(".")):u=[m.hash(r?"":i.domain),Math.floor(1e9*Math.random()),(new Date).getTime(),(new Date).getTime(),1].join("."),e={expires:63072e6,path:"/"},t.length)for(n=0;n<t.length;n++)if(o=t[n],a="."+o,c.indexOf(a)>0&&c.lastIndexOf(a)==c.length-a.length||c==o){e.domain=a;break}return f.set("__DC_gid",u,e),u},getGuid:function(){var e,n,o,a,u=f.get("__guid");if(!u){if(u=[m.hash(r?"":i.domain),m.guid(),+new Date+Math.random()+Math.random()].join("."),e={expires:2592e7,path:"/"},t.length)for(n=0;n<t.length;n++)if(o=t[n],a="."+o,c.indexOf(a)>0&&c.lastIndexOf(a)==c.length-a.length||c==o){e.domain=a;break}f.set("__guid",u,e)}return u},getCount:function(){var t=f.get("__DC_monitor_count");return t||(t=f.get("monitor_count")),t=(parseInt(t)||0)+1,f.set("__DC_monitor_count",t,{expires:864e5,path:"/"}),function(){return t}}(),getFlashVer:function(){var t,e,r,i=-1;if(o.plugins&&o.mimeTypes.length)t=o.plugins["Shockwave Flash"],t&&t.description&&(i=t.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0");else if(n.ActiveXObject&&!n.opera)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e&&(r=e.GetVariable("$version"),i=r.replace(/WIN/g,"").replace(/,/g,"."))}catch(a){}return i=parseInt(i,10)},getContainerId:function(t){var e,n;for(b.areaIds&&(e=RegExp("^("+b.areaIds.join("|")+")$","ig"));t;){if(t.attributes&&("bk"in t.attributes||"data-bk"in t.attributes)){if(n=t.getAttribute("bk")||t.getAttribute("data-bk"))return n="bk:"+n,n.substr(0,100);if(t.id)return n=t.getAttribute("data-desc")||t.id,n.substr(0,100)}else if(e&&t.id&&e.test(t.id))return n=t.getAttribute("data-desc")||t.id,n.substr(0,100);t=t.parentNode}return""},getText:function(t){var e="";return e="input"==t.tagName.toLowerCase()?t.getAttribute("text")||t.getAttribute("data-text")||t.value||t.title||"":t.getAttribute("text")||t.getAttribute("data-text")||t.innerText||t.textContent||t.title||"",s.trim(e).substr(0,100)},getHref:function(t){try{return t.getAttribute("data-href")||t.href||""}catch(e){return""}}},p=function(){function t(t){t&&"function"==typeof t.beforeLog&&n.push(t)}function e(t){n.splice(n.indexOf(t),1)}var n=[];return{addPlugin:function(n){var r,i;if(d.isArray(n))for(i=n.length,r=0;i>r;r++)t(n[r]);else t(n);return function(){e(n),n=null}},getExtend:function(t,e){var r,i=n.length,o=e;for(r=0;i>r;r++)try{o=d.mix(o,n[r].beforeLog(t,e))}catch(a){}return o}}}(),v={cache:{},getBase:function(){return{p:m.getProject(),u:m.getLocation(),guid:m.getGuid(),gid:m.getGid(),sid:m.getSid(),title:document.title,mid:m.getMid()}},getTrack:function(t){var e,n,r,i,o=m.getSid()===m.getSid()?1:0,a={b:m.getBrowser(),c:m.getCount(),r:m.getReferrer(),fl:m.getFlashVer(),sd:m.getColorDepth(),sr:m.getScreenSize(),ul:m.getLanguage(),ce:o};if(t){for(t=t.split(","),e=[],n=0,r=t.length;r>n;n++)i=f.get(t[n]),e.push(t[n]+"="+encodeURIComponent(i));a.uc=encodeURIComponent(e.join("&"))}return a},getClick:function(t){var e,n,r,i,o,a,c,u,s,d;return t=h.fix(t||event),e=t.target,n=e.tagName,r=m.getContainerId(e),!e.type||"submit"!=e.type&&"button"!=e.type?"AREA"==n?{f:m.getHref(e),c:"area:"+e.parentNode.name,cId:r}:("IMG"==n&&(i=e),!!(e=g.parentNode(e,"A"))&&(o=m.getText(e),{f:m.getHref(e),c:o||(i?i.src.match(/[^\/]+$/):""),cId:r})):(a=g.parentNode(e,"FORM"),c={},a?(u=a.id||"",s=e.id,c={f:a.action,c:"form:"+(a.name||u),cId:r},"search-form"!=u&&"searchForm"!=u||"searchBtn"!=s&&"search-btn"!=s||(d=w("kw")||w("search-kw")||w("kw1"),c.w=d?d.value:"")):c={f:m.getHref(e),c:m.getText(e),cId:r},c)},getKeydown:function(t){var e,n,r,i,o,a,c;return t=h.fix(t||event),13!=t.keyCode?!1:(e=t.target,n=e.tagName,r=m.getContainerId(e),"INPUT"==n&&(i=g.parentNode(e,"FORM"))?(o=i.id||"",a=e.id,c={f:i.action,c:"form:"+(i.name||o),cId:r},"kw"!=a&&"search-kw"!=a&&"kw1"!=a||(c.w=e.value),c):!1)},getBaseExtend:function(){return{}},getCacheLog:function(){var t,e;if(!v.cache)return null;t=[];for(e in v.cache)t.push(v.cache[e]);return t}},b={trackUrl:null,clickUrl:null,areaIds:null,hbLogTimer:0,cacheKey:"__DC_log"},w=function(t){return document.getElementById(t)},{version:"v1.8.0 (2018.12.06)",util:m,data:v,config:b,sendLog:function(){return n.__qihoo_monitor_imgs={},function(t){var e="log_"+ +new Date,r=n.__qihoo_monitor_imgs[e]=new Image;v.cache[e]=t,r.onload=r.onerror=function(){n.__qihoo_monitor_imgs&&n.__qihoo_monitor_imgs[e]&&(n.__qihoo_monitor_imgs[e]=null,delete n.__qihoo_monitor_imgs[e],v.cache[e]=null,delete v.cache[e])},r.src=t}}(),buildLog:function(){var t="";return function(e,n){var r,i,o,a,c;!1!==e&&(e=e||{},r=v.getBase(),i=v.getBaseExtend(),o=d.mix(r,i,!0),e=d.mix(o,e,!0),a=n+d.encodeURIJson(e),a!=t&&(t=a,setTimeout(function(){t=""},100),c=d.encodeURIJson(e),c+="&t="+ +new Date,n=n.indexOf("?")>-1?n+"&"+c:n+"?"+c,this.sendLog(n)))}}(),log:function(t,e){e=e||"click";var n=b[e+"Url"];n||console.error("Analytic Error : the "+e+"url does not exist!"),this.buildLog(p.getExtend(e,t),n)},setConf:function(t,e){var n={};return d.isObject(t)?n=t:n[t]=e,this.config=d.mix(this.config,n,!0),this},setUrl:function(t){return t&&(this.util.getLocation=function(){return t}),this},extendBase:function(t){if(t&&d.isObject(t)){var e=d.mix(this.data.getBaseExtend(),t,!0);this.data.getBaseExtend=function(){return e}}return this},setProject:function(t,e){return t&&(this.util.getProject=function(){return t}),this.extendBase(e),this},setId:function(){for(var t,e=[],n=0;t=arguments[n++];)d.isArray(t)?e=e.concat(t):e.push(t);return this.setConf("areaIds",e),this},init:function(){this.startCache(),this.getClickAndKeydown(),this.getClickHeatmap(10,1)},getTrack:function(t,e){var n=this.data.getTrack(t);return d.isObject(e)&&(n=d.mix(n,e,!0)),this.log(n,"track"),this},getClickHeatmap:function(t,e){var n,r,o,a;return this.heatmapTimer?this:(this.heatmapTimer=!0,n=this,r=[],t=t||10,e=e||5,o=0,a=function(i){if(clearTimeout(o),i||r.length>t){if(!r.length)return;return n.log({pos:r.join(","),sr:m.getScreenSize()},"clickHeatMap"),void(r=[])}o=setTimeout(function(){a(!0)},60*e*1e3)},g.on(i,"mousedown",function(t){var e=t.pageX+"."+t.pageY;r.push(e),a()}),this)},getClickAndKeydown:function(){var t=this;return g.on(i,"mousedown",function(e){var n=t.data.getClick(e);t.log(n,"click")}),g.on(i,"keydown",function(e){var n=t.data.getKeydown(e);t.log(n,"click")}),e.getClickAndKeydown=function(){return t},this},beginHeartBeat:function(t,e,n){var r,i,o={};return o.id=t,d.isObject(e)&&(o=d.mix(o,e,!1)),n=isNaN(n)?10:n,n>60?n=60:5>n&&(n=5),r=this,i=function(t){o.steptime=t,r.setConf("hbStarttime",Date.parse(new Date)),r.log(o,"heartbeat"),clearTimeout(b.hbLogTimer),b.hbLogTimer=setTimeout(function(){var t=(Date.parse(new Date)-b.hbStarttime)/1e3;i(t)},1e3*n)},i(0),this},endHeartBeat:function(t,e){var n,r;return void 0!==b.hbStarttime&&null!==b.hbStarttime&&(n={},n.id=t,d.isObject(e)&&(n=d.mix(n,e,!1)),clearTimeout(b.hbLogTimer),r=(Date.parse(new Date)-b.hbStarttime)/1e3,n.steptime=r,this.log(n,"heartbeat"),this.setConf("hbStarttime",null)),this},setActiveTime:function(t){return m._activeTime=t,this},addPlugin:function(t){return p.addPlugin(t)},startCache:function(){var t,e,r=l.get(b.cacheKey);if(r){for(t=r.length,e=0;t>e;e++)this.sendLog(r[e]);l.remove(b.cacheKey)}return g.on(n,"unload",function(){var t=v.getCacheLog();t&&l.set(b.cacheKey,t)}),this}}}(window),n="https:"===location.protocol.toLowerCase()?"https:":"http:";e.setConf({trackUrl:n+"//s.360.cn/qdas/s.htm",clickUrl:n+"//s.360.cn/qdas/c.htm",clickHeatMapUrl:n+"//s.360.cn/qdas/t.htm",wpoUrl:n+"//s.360.cn/qdas/p.htm",heartbeatUrl:n+"//s.360.cn/qdas/h.htm"}).init(),window.QIHOO_MONITOR=e,void 0===window.monitor&&(window.monitor=e)}}();